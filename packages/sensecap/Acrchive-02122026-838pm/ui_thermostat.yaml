lvgl:
  pages:
    - id: page_thermostat
      widgets:
        - label:
            id: thermostat_title
            text: "Thermostat"
            align: TOP_MID
            y: 40
            text_font: montserrat_32
            text_color: 0xFFFFFF

        - label:
            text: "Mode"
            align: TOP_LEFT
            x: 20
            y: 84
            text_font: montserrat_22
            text_color: 0xFFFFFF
        - label:
            id: tstat_mode_label
            text: "--"
            align: TOP_LEFT
            x: 130
            y: 86
            text_font: montserrat_22
            text_color: 0xC0C0C0

        - label:
            text: "Fan"
            align: TOP_LEFT
            x: 250
            y: 84
            text_font: montserrat_22
            text_color: 0xFFFFFF
        - label:
            id: tstat_fan_mode_label
            text: "--"
            align: TOP_LEFT
            x: 330
            y: 86
            text_font: montserrat_20
            text_color: 0xC0C0C0

        - label:
            text: "Current"
            align: TOP_LEFT
            x: 20
            y: 118
            text_font: montserrat_22
            text_color: 0xFFFFFF
        - label:
            id: tstat_current_label
            text: "--"
            align: TOP_LEFT
            x: 130
            y: 120
            text_font: montserrat_22
            text_color: 0xC0C0C0

        - label:
            text: "Target"
            align: TOP_LEFT
            x: 250
            y: 118
            text_font: montserrat_22
            text_color: 0xFFFFFF
        - label:
            id: tstat_target_label
            text: "--"
            align: TOP_LEFT
            x: 330
            y: 120
            text_font: montserrat_22
            text_color: 0xC0C0C0

        - slider:
            id: tstat_target_slider
            align: TOP_MID
            y: 154
            width: 320
            height: 18
            min_value: 50
            max_value: 85
            bg_color: 0x374151
            knob:
              bg_color: 0xFFFFFF
              border_color: 0xF59E0B
              border_width: 2
            indicator:
              bg_color: 0xF59E0B
            on_value:
              then:
                - lvgl.label.update:
                    id: tstat_target_label
                    text: !lambda |-
                      char buf[24];
                      snprintf(buf, sizeof(buf), "%d F", x);
                      return std::string(buf);
            on_release:
              then:
                - lambda: |-
                    id(last_interaction_ms) = millis();
                    id(last_auto_scroll_ms) = id(last_interaction_ms);
                - homeassistant.service:
                    service: climate.set_temperature
                    data:
                      entity_id: climate.thermostat
                    data_template:
                      temperature: !lambda |-
                        char buf[16];
                        snprintf(buf, sizeof(buf), "%d", x);
                        return std::string(buf);

        - button:
            id: tstat_off_btn
            text: "OFF"
            text_color: 0xFFFFFF
            align: TOP_LEFT
            x: 20
            y: 200
            width: 100
            height: 48
            bg_color: 0x374151
            on_press:
              - lambda: |-
                  id(last_interaction_ms) = millis();
                  id(last_auto_scroll_ms) = id(last_interaction_ms);
              - homeassistant.service:
                  service: climate.set_hvac_mode
                  data:
                    entity_id: climate.thermostat
                    hvac_mode: "off"

        - button:
            id: tstat_heat_btn
            text: "HEAT"
            text_color: 0xFFFFFF
            align: TOP_LEFT
            x: 130
            y: 200
            width: 100
            height: 48
            bg_color: 0x374151
            on_press:
              - lambda: |-
                  id(last_interaction_ms) = millis();
                  id(last_auto_scroll_ms) = id(last_interaction_ms);
              - homeassistant.service:
                  service: climate.set_hvac_mode
                  data:
                    entity_id: climate.thermostat
                    hvac_mode: "heat"

        - button:
            id: tstat_cool_btn
            text: "COOL"
            text_color: 0xFFFFFF
            align: TOP_LEFT
            x: 240
            y: 200
            width: 100
            height: 48
            bg_color: 0x374151
            on_press:
              - lambda: |-
                  id(last_interaction_ms) = millis();
                  id(last_auto_scroll_ms) = id(last_interaction_ms);
              - homeassistant.service:
                  service: climate.set_hvac_mode
                  data:
                    entity_id: climate.thermostat
                    hvac_mode: "cool"

        - button:
            id: tstat_auto_btn
            text: "AUTO"
            text_color: 0xFFFFFF
            align: TOP_LEFT
            x: 350
            y: 200
            width: 100
            height: 48
            bg_color: 0x374151
            on_press:
              - lambda: |-
                  id(last_interaction_ms) = millis();
                  id(last_auto_scroll_ms) = id(last_interaction_ms);
              - homeassistant.service:
                  service: climate.set_hvac_mode
                  data:
                    entity_id: climate.thermostat
                    hvac_mode: "auto"

        - button:
            id: tstat_fan_auto_btn
            text: "Fan Auto"
            text_color: 0xFFFFFF
            align: TOP_LEFT
            x: 20
            y: 260
            width: 140
            height: 44
            bg_color: 0x374151
            on_press:
              - lambda: |-
                  id(last_interaction_ms) = millis();
                  id(last_auto_scroll_ms) = id(last_interaction_ms);
              - homeassistant.service:
                  service: climate.set_fan_mode
                  data:
                    entity_id: climate.thermostat
                    fan_mode: "auto"

        - button:
            id: tstat_fan_on_btn
            text: "Fan On"
            text_color: 0xFFFFFF
            align: TOP_LEFT
            x: 170
            y: 260
            width: 140
            height: 44
            bg_color: 0x374151
            on_press:
              - lambda: |-
                  id(last_interaction_ms) = millis();
                  id(last_auto_scroll_ms) = id(last_interaction_ms);
              - homeassistant.service:
                  service: climate.set_fan_mode
                  data:
                    entity_id: climate.thermostat
                    fan_mode: "on"

        - button:
            id: tstat_fan_circ_btn
            text: "Circulate"
            text_color: 0xFFFFFF
            align: TOP_LEFT
            x: 320
            y: 260
            width: 130
            height: 44
            bg_color: 0x374151
            on_press:
              - lambda: |-
                  id(last_interaction_ms) = millis();
                  id(last_auto_scroll_ms) = id(last_interaction_ms);
              - homeassistant.service:
                  service: climate.set_fan_mode
                  data:
                    entity_id: climate.thermostat
                    fan_mode: "circulation"

