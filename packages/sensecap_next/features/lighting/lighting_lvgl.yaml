lvgl:
  pages:
    - id: page_lighting
      widgets:
        - label:
            id: lighting_title
            text: "Lighting"
            align: TOP_MID
            y: 40
            text_font: montserrat_32
            text_color: 0xB45309

        - button:
            id: lighting_all_btn
            align: TOP_LEFT
            x: 20
            y: 88
            width: 215
            height: 64
            bg_color: 0x374151
            on_press:
              - lvgl.widget.update: {id: lighting_all_btn, bg_color: 0x1D4ED8}
              - delay: 120ms
              - script.execute: light_all_toggle
            widgets:
              - image:
                  align: LEFT_MID
                  x: 10
                  src: icon_onoff_24
              - label:
                  text: "All Lights"
                  align: LEFT_MID
                  x: 42
                  text_font: montserrat_18
                  text_color: 0xFFFFFF
              - label:
                  id: light_all_state
                  text: "OFF"
                  align: RIGHT_MID
                  x: -12
                  text_font: montserrat_20
                  text_color: 0xFCA5A5

        - button:
            id: lighting_outdoor_btn
            align: TOP_RIGHT
            x: -20
            y: 88
            width: 215
            height: 64
            bg_color: 0x374151
            on_press:
              - lvgl.widget.update: {id: lighting_outdoor_btn, bg_color: 0x1D4ED8}
              - delay: 120ms
              - script.execute: light_outdoor_toggle
            widgets:
              - image:
                  align: LEFT_MID
                  x: 10
                  src: icon_onoff_24
              - label:
                  text: "Outdoor"
                  align: LEFT_MID
                  x: 42
                  text_font: montserrat_18
                  text_color: 0xFFFFFF
              - label:
                  id: light_outdoor_state
                  text: "OFF"
                  align: RIGHT_MID
                  x: -12
                  text_font: montserrat_20
                  text_color: 0xFCA5A5

        - button:
            id: mbr_light_row_btn
            align: TOP_LEFT
            x: 20
            y: 170
            width: 170
            height: 40
            bg_color: 0x374151
            radius: 8
            border_width: 0
            on_press:
              - script.execute: light_mbr_toggle
            widgets:
              - label:
                  text: "MBR Lights"
                  align: LEFT_MID
                  x: 10
                  text_font: montserrat_16
                  text_color: 0xFFFFFF
              - label:
                  id: mbr_light_state
                  text: "OFF"
                  align: RIGHT_MID
                  x: -5
                  text_font: montserrat_14
                  text_color: 0xFCA5A5

        - slider:
            id: mbr_light_slider
            align: TOP_LEFT
            x: 206
            y: 182
            width: 210
            height: 16
            min_value: 0
            max_value: 100
            bg_color: 0x374151
            knob:
              bg_color: 0xFFFFFF
              border_color: 0xE5B12B
              border_width: 2
            indicator:
              bg_color: 0xE5B12B
            on_value:
              then:
                - lvgl.label.update:
                    id: mbr_light_pct
                    text: !lambda |-
                      char buf[16];
                      snprintf(buf, sizeof(buf), "%d%%", x);
                      return std::string(buf);
            on_release:
              then:
                - script.execute: lighting_mark_interaction
                - if:
                    condition:
                      lambda: 'return x <= 0;'
                    then:
                      - homeassistant.service: {service: light.turn_off, data: {entity_id: light.mbr_lights}}
                    else:
                      - homeassistant.service:
                          service: light.turn_on
                          data:
                            entity_id: light.mbr_lights
                          data_template:
                            brightness_pct: !lambda |-
                              char buf[8];
                              snprintf(buf, sizeof(buf), "%d", x);
                              return std::string(buf);

        - label:
            id: mbr_light_pct
            text: "0%"
            align: TOP_LEFT
            x: 424
            y: 176
            text_font: montserrat_18
            text_color: 0xC0C0C0

        - button:
            id: fr_light_row_btn
            align: TOP_LEFT
            x: 20
            y: 238
            width: 170
            height: 40
            bg_color: 0x374151
            radius: 8
            border_width: 0
            on_press:
              - script.execute: light_fr_toggle
            widgets:
              - label:
                  text: "FR Lights"
                  align: LEFT_MID
                  x: 10
                  text_font: montserrat_16
                  text_color: 0xFFFFFF
              - label:
                  id: fr_light_state
                  text: "OFF"
                  align: RIGHT_MID
                  x: -10
                  text_font: montserrat_14
                  text_color: 0xFCA5A5

        - slider:
            id: fr_light_slider
            align: TOP_LEFT
            x: 206
            y: 250
            width: 210
            height: 16
            min_value: 0
            max_value: 100
            bg_color: 0x374151
            knob:
              bg_color: 0xFFFFFF
              border_color: 0x3B82C4
              border_width: 2
            indicator:
              bg_color: 0x3B82C4
            on_value:
              then:
                - lvgl.label.update:
                    id: fr_light_pct
                    text: !lambda |-
                      char buf[16];
                      snprintf(buf, sizeof(buf), "%d%%", x);
                      return std::string(buf);
            on_release:
              then:
                - script.execute: lighting_mark_interaction
                - if:
                    condition:
                      lambda: 'return x <= 0;'
                    then:
                      - homeassistant.service: {service: light.turn_off, data: {entity_id: light.in_wall_paddle_dimmer_500s}}
                    else:
                      - homeassistant.service:
                          service: light.turn_on
                          data:
                            entity_id: light.in_wall_paddle_dimmer_500s
                          data_template:
                            brightness_pct: !lambda |-
                              char buf[8];
                              snprintf(buf, sizeof(buf), "%d", x);
                              return std::string(buf);

        - label:
            id: fr_light_pct
            text: "0%"
            align: TOP_LEFT
            x: 424
            y: 244
            text_font: montserrat_18
            text_color: 0xC0C0C0

        - button:
            id: lr_light_row_btn
            align: TOP_LEFT
            x: 20
            y: 306
            width: 170
            height: 40
            bg_color: 0x374151
            radius: 8
            border_width: 0
            on_press:
              - script.execute: light_lr_toggle
            widgets:
              - label:
                  text: "LR Lights"
                  align: LEFT_MID
                  x: 10
                  text_font: montserrat_16
                  text_color: 0xFFFFFF
              - label:
                  id: lr_light_state
                  text: "OFF"
                  align: RIGHT_MID
                  x: -10
                  text_font: montserrat_14
                  text_color: 0xFCA5A5

        - slider:
            id: lr_light_slider
            align: TOP_LEFT
            x: 206
            y: 318
            width: 210
            height: 16
            min_value: 0
            max_value: 100
            bg_color: 0x374151
            knob:
              bg_color: 0xFFFFFF
              border_color: 0xD96C2C
              border_width: 2
            indicator:
              bg_color: 0xD96C2C
            on_value:
              then:
                - lvgl.label.update:
                    id: lr_light_pct
                    text: !lambda |-
                      char buf[16];
                      snprintf(buf, sizeof(buf), "%d%%", x);
                      return std::string(buf);
            on_release:
              then:
                - script.execute: lighting_mark_interaction
                - if:
                    condition:
                      lambda: 'return x <= 0;'
                    then:
                      - homeassistant.service: {service: light.turn_off, data: {entity_id: light.library_lights}}
                      - homeassistant.service: {service: light.turn_off, data: {entity_id: light.living_room_lights}}
                    else:
                      - homeassistant.service:
                          service: light.turn_on
                          data:
                            entity_id: light.library_lights
                          data_template:
                            brightness_pct: !lambda |-
                              char buf[8];
                              snprintf(buf, sizeof(buf), "%d", x);
                              return std::string(buf);
                      - homeassistant.service:
                          service: light.turn_on
                          data:
                            entity_id: light.living_room_lights
                          data_template:
                            brightness_pct: !lambda |-
                              char buf[8];
                              snprintf(buf, sizeof(buf), "%d", x);
                              return std::string(buf);

        - label:
            id: lr_light_pct
            text: "0%"
            align: TOP_LEFT
            x: 424
            y: 312
            text_font: montserrat_18
            text_color: 0xC0C0C0
