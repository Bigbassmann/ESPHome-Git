script:
  - id: lighting_mark_interaction
    then:
      - lambda: |-
          uint32_t now = millis();
          id(last_interaction_ms) = now;
          id(last_auto_scroll_ms) = now;
  - id: light_all_toggle
    then:
      - script.execute: lighting_mark_interaction
      - if:
          condition:
            lambda: 'return id(ha_all_lights_toggle).state;'
          then:
            - homeassistant.service: {service: input_boolean.turn_off, data: {entity_id: input_boolean.all_lights_toggle}}
          else:
            - homeassistant.service: {service: input_boolean.turn_on, data: {entity_id: input_boolean.all_lights_toggle}}

  - id: light_outdoor_toggle
    then:
      - script.execute: lighting_mark_interaction
      - if:
          condition:
            lambda: 'return id(ha_outdoor_lights_toggle).state;'
          then:
            - homeassistant.service: {service: input_boolean.turn_off, data: {entity_id: input_boolean.outdoor_lights_toggle}}
          else:
            - homeassistant.service: {service: input_boolean.turn_on, data: {entity_id: input_boolean.outdoor_lights_toggle}}

  - id: light_mbr_toggle
    then:
      - script.execute: lighting_mark_interaction
      - if:
          condition:
            lambda: 'return id(ha_mbr_lights_on).state;'
          then:
            - homeassistant.service: {service: light.turn_off, data: {entity_id: light.mbr_lights}}
          else:
            - homeassistant.service: {service: light.turn_on, data: {entity_id: light.mbr_lights}}

  - id: light_fr_toggle
    then:
      - script.execute: lighting_mark_interaction
      - if:
          condition:
            lambda: 'return id(ha_fr_lights_on).state;'
          then:
            - homeassistant.service: {service: light.turn_off, data: {entity_id: light.in_wall_paddle_dimmer_500s}}
          else:
            - homeassistant.service: {service: light.turn_on, data: {entity_id: light.in_wall_paddle_dimmer_500s}}

  - id: light_lr_toggle
    then:
      - script.execute: lighting_mark_interaction
      - if:
          condition:
            lambda: 'return id(ha_library_lights_on).state || id(ha_living_room_lights_on).state;'
          then:
            - homeassistant.service: {service: light.turn_off, data: {entity_id: light.library_lights}}
            - homeassistant.service: {service: light.turn_off, data: {entity_id: light.living_room_lights}}
          else:
            - homeassistant.service: {service: light.turn_on, data: {entity_id: light.library_lights}}
            - homeassistant.service: {service: light.turn_on, data: {entity_id: light.living_room_lights}}


